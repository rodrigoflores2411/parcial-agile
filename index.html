<script src="https://www.gstatic.com/firebasejs/11.0.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/11.0.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/11.0.0/firebase-firestore-compat.js"></script>
<script src="js/dom-ready.js?v=1"></script>
<script src="js/firebase-config.js?v=13"></script>
<script>
  const app = firebase.apps.length ? firebase.app() : firebase.initializeApp(window.FIREBASE_CFG);
  const auth = firebase.auth();

  onReady(() => {
    on("loginForm", "submit", async (e) => {
      e.preventDefault();
      const email = document.getElementById("email")?.value.trim();
      const password = document.getElementById("password")?.value;
      const msg = document.getElementById("loginMsg");
      try {
        await auth.signInWithEmailAndPassword(email, password);
        location.href = "dashboard.html";
      } catch (err) {
        msg.className = "alert err";
        msg.textContent = err.code === "auth/invalid-credential"
          ? "Correo o contrase√±a incorrectos."
          : err.message;
      }
    });
  });
</script>
